<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= selectedUser.username %>'s Events</title>
</head>
<body>
    <%- include('../partials/_navbar.ejs') %>
    <h1><%= selectedUser.username %>'s Events</h1>

    <% if (events.length > 0){ %>
      <ul>
        <% events.forEach(item => { %>
            <li>
              <strong><%= item.title %></strong> — <%= item.location %><br/>
              Date: <%= item.date ? item.date.toISOString().split('T')[0] : 'No date set' %><br/>
              Public: <%= item.isPublic ? 'Yes' : 'No' %><br/>
            </li>

            <% if (item.checklist && item.checklist.length > 0) { %>
              <ul>
                <% item.checklist.forEach(task => { %>
                  <li>
                    <%= task.task %> — <%= task.isDone ? 'Done' : 'Pending' %>
                  </li>
                <% }) %>
              </ul>
            <% } else { %>
              <em>No checklist items</em>
              <br />
            <% } %>
              
            <br />
          
        <% }); %>
      </ul>
    <% } else { %>
      <p>There are no events created.</p>
    <% } %>

<a href="/users"> Back to Community</a>
</body>
</html>